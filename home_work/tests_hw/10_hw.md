# Домашнее задание №10 - `Александра Бужор`

## 1. Тест для Text Box

```python
# demoqa_home/tests/tests_hw/test_text_box.py
import pytest
from pages.text_box_page import TextBoxPage


class TestTextBox:
    """Тесты для страницы Text Box."""
    
    def test_text_box_submission(self, driver):
        """
        Тест заполнения и отправки формы Text Box.
        
        Steps:
        a. перейти на страницу https://demoqa.com/text-box
        b. записать в поля Full Name, Current Address произвольный текст
        c. нажать на кнопку submit
        d. проверить, что снизу появились 2 элемента с нашим текстом
        """
        # a. Переходим на страницу
        text_box_page = TextBoxPage(driver)
        text_box_page.visit()
        
        # b. Записываем произвольный текст в поля (через переменные)
        full_name = "Иван Иванов"
        current_address = "ул. Примерная, д. 123, г. Москва"
        
        text_box_page.enter_full_name(full_name)
        text_box_page.enter_current_address(current_address)
        
        # c. Нажимаем на кнопку submit
        text_box_page.click_submit()
        
        # d. Проверяем, что появились элементы с нашим текстом
        output_name = text_box_page.get_output_name_text()
        output_address = text_box_page.get_output_address_text()
        
        assert output_name == f"Name:{full_name}", \
            f"Ожидалось: 'Name:{full_name}', получено: '{output_name}'"
        
        assert output_address == f"Current Address :{current_address}", \
            f"Ожидалось: 'Current Address :{current_address}', получено: '{output_address}'"
```

## 2. Page Object для Text Box

```python
# demoqa_home/pages/text_box_page.py
from pages.base_page import BasePage
from selenium.webdriver.common.by import By


class TextBoxPage(BasePage):
    """Класс для работы со страницей Text Box."""
    
    def __init__(self, driver):
        super().__init__(driver)
        self.url = "https://demoqa.com/text-box"
        
        # Локаторы элементов
        self.full_name_input = "#userName"
        self.email_input = "#userEmail"
        self.current_address_input = "#currentAddress"
        self.permanent_address_input = "#permanentAddress"
        self.submit_button = "#submit"
        self.output_name = "#output #name"
        self.output_address = "#output #currentAddress"
    
    def visit(self):
        """Переход на страницу Text Box."""
        self.driver.get(self.url)
    
    def enter_full_name(self, text):
        """Ввод текста в поле Full Name."""
        element = self.find_element(self.full_name_input)
        element.clear()
        element.send_keys(text)
    
    def enter_current_address(self, text):
        """Ввод текста в поле Current Address."""
        element = self.find_element(self.current_address_input)
        element.clear()
        element.send_keys(text)
    
    def click_submit(self):
        """Клик по кнопке Submit."""
        element = self.find_element(self.submit_button)
        element.click()
    
    def get_output_name_text(self):
        """Получение текста из output name."""
        try:
            element = self.find_element(self.output_name)
            return element.text
        except:
            return ""
    
    def get_output_address_text(self):
        """Получение текста из output address."""
        try:
            element = self.find_element(self.output_address)
            return element.text
        except:
            return ""
```

## 3. Тест для проверки Practice Form

```python
# demoqa_home/tests/tests_hw/test_login_form_validate.py
import pytest
from pages.practice_form_page import PracticeFormPage


class TestPracticeFormValidation:
    """Тесты для проверки валидации Practice Form."""
    
    def test_placeholder_validation(self, driver):
        """
        Тест проверки плейсхолдеров и атрибутов полей.
        
        Steps:
        a. перейти на страницу https://demoqa.com/automation-practice-form
        b. проверить плейсхолдер у полей:
           i. first_name
           ii. last_name
           iii. user_email - также проверьте атрибут "pattern"
        """
        # a. Переходим на страницу
        form_page = PracticeFormPage(driver)
        form_page.visit()
        
        # b. Проверяем плейсхолдеры
        first_name_placeholder = form_page.get_first_name_placeholder()
        last_name_placeholder = form_page.get_last_name_placeholder()
        email_placeholder = form_page.get_email_placeholder()
        email_pattern = form_page.get_email_pattern()
        
        assert first_name_placeholder == "First Name", \
            f"Плейсхолдер First Name: ожидалось 'First Name', получено '{first_name_placeholder}'"
        
        assert last_name_placeholder == "Last Name", \
            f"Плейсхолдер Last Name: ожидалось 'Last Name', получено '{last_name_placeholder}'"
        
        assert email_placeholder == "name@example.com", \
            f"Плейсхолдер Email: ожидалось 'name@example.com', получено '{email_placeholder}'"
        
        assert email_pattern == "[^@\\s]+@[^@\\s]+\\.[^@\\s]+", \
            f"Pattern Email: ожидалось стандартное выражение, получено '{email_pattern}'"
    
    def test_empty_form_validation(self, driver):
        """
        Тест проверки валидации пустой формы.
        
        Steps:
        c. Сделайте попытку отправки пустой формы и проверьте наличие класса "was-validated" у элемента формы
        """
        # a. Переходим на страницу
        form_page = PracticeFormPage(driver)
        form_page.visit()
        
        # c. Пытаемся отправить пустую форму
        form_page.submit_form()
        
        # Проверяем наличие класса "was-validated"
        has_validation_class = form_page.has_was_validated_class()
        
        assert has_validation_class == True, \
            "После отправки пустой формы должен добавляться класс 'was-validated'"
```

## 4. Page Object для Practice Form

```python
# demoqa_home/pages/practice_form_page.py
from pages.base_page import BasePage
from selenium.webdriver.common.by import By


class PracticeFormPage(BasePage):
    """Класс для работы со страницей Practice Form."""
    
    def __init__(self, driver):
        super().__init__(driver)
        self.url = "https://demoqa.com/automation-practice-form"
        
        # Локаторы элементов
        self.first_name_input = "#firstName"
        self.last_name_input = "#lastName"
        self.email_input = "#userEmail"
        self.submit_button = "#submit"
        self.form_element = "#userForm"
        self.state_dropdown = "#state"
        self.state_list = "#state div"
        self.city_dropdown = "#city"
        self.city_list = "#city div"
    
    def visit(self):
        """Переход на страницу Practice Form."""
        self.driver.get(self.url)
    
    def get_first_name_placeholder(self):
        """Получение плейсхолдера поля First Name."""
        element = self.find_element(self.first_name_input)
        return element.get_attribute("placeholder")
    
    def get_last_name_placeholder(self):
        """Получение плейсхолдера поля Last Name."""
        element = self.find_element(self.last_name_input)
        return element.get_attribute("placeholder")
    
    def get_email_placeholder(self):
        """Получение плейсхолдера поля Email."""
        element = self.find_element(self.email_input)
        return element.get_attribute("placeholder")
    
    def get_email_pattern(self):
        """Получение атрибута pattern поля Email."""
        element = self.find_element(self.email_input)
        return element.get_attribute("pattern")
    
    def submit_form(self):
        """Отправка формы."""
        element = self.find_element(self.submit_button)
        element.click()
    
    def has_was_validated_class(self):
        """Проверяет наличие класса 'was-validated' у формы."""
        element = self.find_element(self.form_element)
        classes = element.get_attribute("class")
        return "was-validated" in classes
    
    def select_state(self, state_name):
        """Выбор штата из dropdown."""
        state_dropdown = self.find_element(self.state_dropdown)
        state_dropdown.click()
        
        # Ждем появления списка и выбираем нужный штат
        states = self.driver.find_elements(By.CSS_SELECTOR, self.state_list)
        for state in states:
            if state.text == state_name:
                state.click()
                return
    
    def select_city(self, city_name):
        """Выбор города из dropdown."""
        city_dropdown = self.find_element(self.city_dropdown)
        city_dropdown.click()
        
        # Ждем появления списка и выбираем нужный город
        cities = self.driver.find_elements(By.CSS_SELECTOR, self.city_list)
        for city in cities:
            if city.text == city_name:
                city.click()
                return
```

## 5. Дополнительный тест для заполнения State and City

```python
# demoqa_home/tests/tests_hw/test_login_form.py
import pytest
from pages.practice_form_page import PracticeFormPage


class TestPracticeForm:
    """Дополнительные тесты для Practice Form."""
    
    def test_fill_state_and_city(self, driver):
        """
        Тест заполнения полей State and City.
        
        Steps:
        a. перейти на страницу https://demoqa.com/automation-practice-form
        b. заполнить поле State
        c. заполнить поле City
        """
        # a. Переходим на страницу
        form_page = PracticeFormPage(driver)
        form_page.visit()
        
        # b. Заполняем поле State
        state_name = "NCR"
        form_page.select_state(state_name)
        
        # c. Заполняем поле City
        city_name = "Delhi"
        form_page.select_city(city_name)
        
        # Проверяем, что выбор произошел (можно добавить более сложные проверки)
        # Здесь просто убедимся, что элементы доступны для взаимодействия
        assert form_page.is_element_visible(form_page.state_dropdown) == True
        assert form_page.is_element_visible(form_page.city_dropdown) == True
```

## 6. Запуск тестов

```bash
# Запускаем все домашние тесты
pytest tests/tests_hw/test_text_box.py -v
pytest tests/tests_hw/test_login_form_validate.py -v
pytest tests/tests_hw/test_login_form.py -v

# Или все вместе
pytest tests/tests_hw/ -v
```

## 📁 Итоговая структура проекта:

```
demoqa_home/
├── pages/
│   ├── __init__.py
│   ├── base_page.py
│   ├── swag_labs.py
│   ├── demoqa_page.py
│   ├── accordion.py
│   ├── modal_dialogs.py
│   ├── text_box_page.py      # ← НОВЫЙ ФАЙЛ
│   └── practice_form_page.py # ← НОВЫЙ ФАЙЛ
├── tests/
│   ├── __init__.py
│   ├── test_check_swag.py
│   └── tests_hw/
│       ├── __init__.py
│       ├── test_check_text.py
│       ├── test_visible_hw.py
│       ├── test_page_dialogs.py
│       ├── test_text_box.py       # ← НОВЫЙ ФАЙЛ
│       ├── test_login_form_validate.py # ← НОВЫЙ ФАЙЛ
│       └── test_login_form.py     # ← НОВЫЙ ФАЙЛ
├── components/
│   ├── __init__.py
│   └── base_component.py
├── conftest.py
├── .gitignore
├── readme.md
└── requirements.txt
```

## 🔧 Особенности реализации:

1. **Переменные для текста**: В тесте `Text Box` используются переменные для сравнения
2. **Проверка атрибутов**: В Practice Form проверяются placeholder и pattern
3. **Валидация формы**: Проверка класса `was-validated` после отправки пустой формы
4. **Работа с dropdown**: Реализован выбор `State` и `City` из выпадающих списков
5. **Обработка исключений**: Все методы имеют обработку исключений для стабильности тестов
